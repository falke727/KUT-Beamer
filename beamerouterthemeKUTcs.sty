% Beamer Outer Theme for Kochi University of Technology (KUT) cs,
% ver 0.01 (2022-03-05)
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.

\ProvidesPackage{beamerouterthemeKUTcs}[03/05/2022]

\mode<presentation>

%=========================================================%
% Logo
%=========================================================%
\pgfdeclareimage[height=3em,interpolate=true]{logomarktf}{logo/25thlogo_1.jpg}
\pgfdeclareimage[height=1.5em,interpolate=true]{logomarktfs}{logo/25thlogo_2.jpg}
\pgfdeclareimage[height=1.5em,interpolate=true]{logomarktft}{logo/25thlogo_3.jpg}

\pgfdeclareimage[height=1.5em,interpolate=true]{logomark}{logo/2016_logo07.jpg}
\pgfdeclareimage[height=3em,interpolate=true]{logolong}{logo/2016_logo09.jpg}
\pgfdeclareimage[height=3em,interpolate=true]{logojp}{logo/2016_logo05.jpg}

\ifbeamer@nologo
  \else 
    \ifbeamer@jp
      \titlegraphic{\pgfuseimage{logojp}}  
      \else \titlegraphic{\pgfuseimage{logolong}}
  \fi
\fi
%=========================================================%
% Colors and Shades
%=========================================================%
%% \setbeamercolor{section in head/foot}{parent=palette quaternary}
%% \setbeamercolor{subsection in head/foot}{parent=palette primary}
%% \setbeamercolor{author in head/foot}{parent=palette primary}
%% \setbeamercolor{title in head/foot}{parent=palette tertiary}
%% \setbeamercolor{date in head/foot}{parent=palette primary}

\setbeamercolor*{author in head/foot}{parent=palette tertiary}
\setbeamercolor*{title in head/foot}{parent=palette secondary}
\setbeamercolor*{date in head/foot}{parent=palette primary}

\setbeamercolor*{section in head/foot}{parent=palette tertiary}
\setbeamercolor*{subsection in head/foot}{parent=palette primary}
\setbeamertemplate{page number in head/foot}[totalframenumber]%

%% \usesectionheadtemplate
%%   {\hfill\insertsectionhead}
%%   {\hfill\color{fg!50!bg}\insertsectionhead}
%% \pgfdeclarehorizontalshading[frametitle.bg,frametitle right.bg]{beamer@frametitleshade}{\paperheight}{
%%   color(0pt)=(frametitle.bg);
%%   color(\paperwidth)=(frametitle right.bg)}
%% \AtBeginDocument{
%%   \pgfdeclareverticalshading{beamer@topshade}{\paperwidth}{
%%     color(0pt)=(bg);
%%     color(4pt)=(black!50!bg)}
%% }

\defbeamertemplate*{footline}{infolines theme}
{%
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor\expandafter\ifblank\expandafter{\beamer@shortinstitute}{}{~~(\insertshortinstitute)}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.333333\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \usebeamercolor[fg]{page number in head/foot}\usebeamerfont{page number in head/foot}\usebeamertemplate{page number in head/foot}\hspace*{2ex} 
  \end{beamercolorbox}}%
  \vskip0pt%
}

\defbeamertemplate*{headline}{infolines theme}
{%
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,right]{section in head/foot}%
    \usebeamerfont{section in head/foot}\insertsectionhead\hspace*{2ex}
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.65ex,dp=1.5ex,left]{subsection in head/foot}%
    \usebeamerfont{subsection in head/foot}\hspace*{2ex}\insertsubsectionhead
  \end{beamercolorbox}}%
  \vskip0pt%
}

% \setbeamersize{text margin left=1em,text margin right=1em}
\setbeamersize{text margin left=2em,text margin right=2em}

%% %=========================================================%
%% % Header
%% %=========================================================%
%% \newif\ifbeamer@theme@subsection
%% \beamer@theme@subsectiontrue

%% \DeclareOptionBeamer{footline}{\csname beamer@theme@footline@#1\endcsname}
%% \DeclareOptionBeamer{subsection}[true]{\csname beamer@theme@subsection#1\endcsname}
%% \ProcessOptionsBeamer

%% \defbeamertemplate*{headline}{KUT theme}
%% {%
%%   \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
%%   \end{beamercolorbox}%
%%   \begin{beamercolorbox}{section in head/foot}
%%     \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
%%   \end{beamercolorbox}%
%%   \ifbeamer@theme@subsection
%%     \begin{beamercolorbox}[colsep=1.5pt]{middle separation line head}
%%     \end{beamercolorbox}%
%%     \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,
%%       leftskip=.3cm,rightskip=.3cm plus1fil]{subsection in head/foot}
%%       \usebeamerfont{subsection in head/foot}\insertsubsectionhead
%%     \end{beamercolorbox}%
%%   \fi
%%   \begin{beamercolorbox}[colsep=1.5pt]{lower separation line head}
%%   \end{beamercolorbox}%
%% }

%=========================================================%
% Footer
%=========================================================%
%% \defbeamertemplate*{footline}{KUT theme}
%% {%
%%   \leavevmode%
%%   \hbox{%
%%     \begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,sep=0pt,center]{author in head/foot}%
%%       \usebeamerfont{author in head/foot}\insertshortauthor~(\insertshortinstitute)
%%     \end{beamercolorbox}%
%%     \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,sep=0pt,center]{title in head/foot}
%%       \usebeamerfont{title in head/foot}\insertshorttitle
%%     \end{beamercolorbox}%
%%     \begin{beamercolorbox}[wd=.25\paperwidth,ht=2.25ex,dp=1ex,sep=0pt,center]{date
%%      in head/foot}
%%       \insertframenumber{}  / \inserttotalframenumber\hspace*{1ex}
%%     \end{beamercolorbox}%
%%   }%
%%   \vskip0pt%
%% }

%=========================================================%
% Frame Title
%=========================================================%
\defbeamertemplate*{frametitle}{KUT theme}
{%
 \nointerlineskip%
  \hbox{\leavevmode%
    %% \advance\beamer@leftmargin by -12bp%
    %% \advance\beamer@rightmargin by -12bp%
    \beamer@tempdim=\paperwidth%
    %% \advance\beamer@tempdim by \beamer@leftmargin%
    %% \advance\beamer@tempdim by \beamer@rightmargin%
    %% \hskip-3em
    \hskip-2em
    \hbox{%
      \setbox\beamer@tempbox=\hbox{%
        \ifbeamer@nologo
        \begin{minipage}[t]{0.99\paperwidth}%
         \vbox{}%
          \vskip0ex%
          \leftskip0.5cm%
          \rightskip0.3cm plus1fil\leavevmode%
          \insertframetitle%
          \vskip-1.75ex%
          \vbox{}% 
        \end{minipage}
        
        \else
        \ifbeamer@tflogo
        \begin{minipage}[t]{0.92\paperwidth}%
          \vbox{}%
          \vskip0ex%
          \leftskip0.5cm%
          \rightskip0.3cm plus1fil\leavevmode%
          \insertframetitle%
          \vskip-1.75ex%
          \vbox{}%
        \end{minipage}%
        \begin{minipage}[t]{0.08\paperwidth}         
          \vbox to 0pt{\vskip1mm
            \pgfuseimage{logomarktfs}
            \vss}
        \end{minipage}

        \else
        \begin{minipage}[t]{0.92\paperwidth}%
          \vbox{}%
          \vskip0ex%
          \leftskip0.5cm%
          \rightskip0.3cm plus1fil\leavevmode%
          \insertframetitle%
          \vskip-1.75ex%
          \vbox{}%
        \end{minipage}%
        \begin{minipage}[t]{0.08\paperwidth}         
          \vbox to 0pt{\vskip1mm
            \pgfuseimage{logomark}
            \vss}
        \end{minipage}
        \fi
        \fi%
      }
     \beamer@tempdim=\ht\beamer@tempbox
      \advance\beamer@tempdim by 4pt
      \begin{pgfpicture}{0pt}{0pt}{\paperwidth}{\beamer@tempdim}
        \usebeamercolor{frametitle right}
        \pgfpathrectangle{\pgfpointorigin}{\pgfpoint{\paperwidth}{\beamer@tempdim}}
        \pgfusepath{clip}
        %% \pgftext[left,bottom]{\pgfuseshading{beamer@frametitleshade}}
      \end{pgfpicture}%
      \hskip-\paperwidth%
      \box\beamer@tempbox%
    }%
    \hskip-\Gm@rmargin%
  }%
  \nointerlineskip
}

\mode
<all>
